---
title: 目标检测中的匹配机制
typora-copy-images-to: ./目标检测中的匹配机制
date: 2023-01-22 16:55:53
tags: [目标检测,深度学习]
---

# 目标检测中的匹配机制

### 1. FCOS

相较于reatinnet  FOs 的正负样本匹配机制会产生更多的正样本

### 2. ATSS

#### 匹配步骤

1. 计算每个gt box与多尺度输出层 anchor之间的IoU
2. 计算每个gt box与多尺度输出层anchor中心坐标的L2距离
3. 遍历层 ， 遍历gt box ，topk(k 默认是9 ）L2 最小距离的anchor， 一共有L层个 L*K, 每个gt
4. 对于每个gt box， 计算anchor与box之间的（IoU）的（mean， var） 均值和方差，相加之和作为阈值
5. 对于每个gt box 大于阈值的作为正样本， 其他作为负样本
6. 若topk过大，导致不在内部， 则过滤掉

### 3. OTA(Optimal Transport Assignment)

### 4. simOTA

#### 优点

1. simOTA能够自动分析每个gt、所需要多少正样本
2. 能自动决定每个gt 从哪个特征图来负责检测
3. 相比OTA, simOTA更快
4. 相比于OTA， 避免额外超参数

#### 代码逻辑

1. 计算正区域
2. 计算anchor与gt的iou
3. 在候选区域计算cost
4. 利用iou确定每个gt的dynamic_k
5. gt选取cost最小dynamic_k个anchor正样本， 其余为负
6. 使用正负样本计算loss