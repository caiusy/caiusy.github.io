---
title: 遍历文件夹图片
date: 2019-09-03 00:00:00
categories:
  - 其他
tags:
  - 编程
---
## 题目要求

要求从下图所示的文件夹遍历子文件夹，并将所在的图片路径保存到txt文件中  

## 代码如下
    
    
    1  
    2  
    3  
    4  
    5  
    6  
    7  
    8  
    9  
    10  
    11  
    12  
    13  
    14  
    15  
    16  
    17  
    

| 
    
    
    import os, glob  
    import random  
    root = '/media/data1/lesson/pokemon/pokeman'  
    f_w = open(os.path.join('../', 'train2.txt'), 'w', encoding='utf8')  
    images = []  
    for name in sorted(os.listdir(os.path.join((root)))): # 获取子文件夹  
        if not os.path.isdir(os.path.join(root,name)):  
            continue  
        images += glob.glob(os.path.join(root, name, '*.png'))  
        images += glob.glob(os.path.join(root, name, '*.jpg'))  
        images += glob.glob(os.path.join(root, name, '*.jpeg'))  
    random.shuffle(images)  
    for line in images:  
        f_w.write(line + '\n')  
        # f_w.write(line)  
    f_w.close()  
    print('Write Done!')  
      
  
---|---  
      
    
    1  
    2  
    3  
    4  
    5  
    6  
    7  
    8  
    9  
    10  
    11  
    12  
    13  
    14  
    15  
    16  
    17  
    18  
    19  
    20  
    21  
    22  
    23  
    24  
    25  
    26  
    27  
    28  
    29  
    30  
    31  
    32  
    33  
    34  
    

| 
    
    
    # 咖喱的代码  
    import os  
    import glob  
    import os.path as osp  
      
      
      
        dataset_dir = os.getcwd()  
        bulbasaur_dir = osp.join(dataset_dir, 'pokeman/bulbasaur')  
        charmander_dir = osp.join(dataset_dir, 'pokeman/charmander')  
        mewtwo_dir = osp.join(dataset_dir, 'pokeman/mewtwo')  
        pikachu_dir = osp.join(dataset_dir, 'pokeman/pikachu')  
        squirtle_dir = osp.join(dataset_dir, 'pokeman/squirtle')  
      
    def process(dir_path, save_path):  
        img_paths = glob.glob(osp.join(dir_path, '*.jpg'))  
      
        f= open(save_path, 'w')  
        for img_path in img_paths:  
        	f.write(img_path)  
        	f.write('\n')  
        f.close()  
      
      
    dataset_dir = os.getcwd()  
    bulbasaur_dir = osp.join(dataset_dir, 'pokeman/bulbasaur')  
    charmander_dir = osp.join(dataset_dir, 'pokeman/charmander')  
    mewtwo_dir = osp.join(dataset_dir, 'pokeman/mewtwo')  
    pikachu_dir = osp.join(dataset_dir, 'pokeman/pikachu')  
    squirtle_dir = osp.join(dataset_dir, 'pokeman/squirtle')  
      
    save_dir = osp.join(dataset_dir, 'imgpath.txt')  
      
    process(test_dir, save_dir)  
      
  
---|---
